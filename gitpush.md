# Что такое git push и как его использовать
## Введение
Команда `git push` позволяет отправлять локальную ветку на удаленный репозиторий. Она помогает разработчикам синхронизироваться в команде, а именно отправляет проделанные изменения. Если программист работает один, то пуш позволяет хранить код в облаке, например github, gitlab и не только, избавляя от риска потери данных на компьютере.

Дополнительно для синхронизации еще используют `git pull` для получения изменений с сервера и `git remote`, чтобы получить список удаленных подключений к репозиторию.

В этой инструкции мы расскажем, как запушить в удаленный git репозиторий. В статье под «пушем» будем подразумевать `git push`.

## Отправка изменений в чистый репозиторий
Перед пушем надо связать локальный и удаленный репозитории. Делается это при помощи команды:
```
git remote add <repository_name> link
```

Вместо ***repository_name*** нужно дать имя удаленному репозиторию. Далее в инструкции вместо этого параметра мы будем использовать origin, так как чаще всего используют это имя.

Вместо ***link*** — ссылка на удаленный репозиторий, она может выглядеть по-разному в зависимости от того используется ssh или https. 

Для ssh, который обязателен для github и gitlab, потребуются сделать дополнительные манипуляции для создания ssh-ключа. Соответствующие инструкции есть на этих ресурсах.

# Отправка изменений
Перед пушем надо зафиксировать текущие изменения, то есть сделать `git commit`.

Далее для отправки в терминале пишем:
```
git push origin <branch>
```
Вместо ***branch*** — имя ветки, которую надо отправить. Чаще всего используется `master` или `main`: 
```
git push origin master
```
Такое каждый раз писать слишком громоздко, для этого придумали `git push` по умолчанию. Для этого единожды набираем предыдущую команду с флагом `-u`:
```
git push -u origin master
```
После этого можно писать более коротко, так как git запомнил, что пушить надо на сервер origin ветку под именем master:
```
git push
```
Таким образом, git позволяет запушить ветку в удаленный репозиторий. Чтобы через git добавить ветку в удаленный репозиторий, надо запушить существующую локальную ветку.

# Дополнительные опции публикации
## Отправка ветки на сервер в ветку с другим именем
Для того чтобы сделать `git push` в другую ветку, есть специальный синтаксис, где после имени ветки через двоеточие пишется имя удаленной ветки:
```
git push origin branch:server_branch
```
где ***branch*** – имя локальной ветки, ***server_branch*** – имя удаленной ветки на сервере.

# Отправка всех веток на сервер
Вместо имени ветки пишем  флаг `—all`: 
```
git push origin --all
```
После этого все зафиксированные изменения в ветках отправятся в удаленный репозиторий.

# Отправка текущей ветки
Удобный способ отправить текущую ветку с тем же именем на сервере.
```
git push origin HEAD
```
***HEAD*** указывает на текущую ветку *(current _branch)*. Тем самым, не надо запоминать имя ветки, на которой вы находитесь.

# Принудительная публикация (git push —force …)
При отправке может произойти ошибка публикации:
```
To github.com:example/test.git
 ! [rejected]        master -> master (fetch first)
error: не удалось отправить некоторые ссылки в «github.com:example/test.git»
```
Это так называемый **git push rejected**, он означает что пуш был отклонен. Правильнее всего — сделать то, что написано в подсказке к ошибке. Надо получить и смержить изменения, затем снова отправить. 

Эта ошибка происходит, так как git проверяет, что новый коммит основан на предыдущих коммитах. Пока вы вносили изменения, кто-то мог запушить изменения того же, над чем вы работали. Поэтому git не может выполнить автоматическое слияние, ваш коммит был раньше и он не базируется на обновленных коммитах в удаленном репозиториие. 

Флагом `—force` или сокращенной его версией `-f` отключается проверка коммитов и при необходимости выполняется перезапись истории.
```
git push --force
```
Нужно быть аккуратными с этой командой, так как она стирает работу других людей. Эта команда оправдана лишь изредка, например, если вы почти сразу внесли изменения коммита с помощью `git commit —amend` и запушили до того, как кто-то сделал `git pull`. 